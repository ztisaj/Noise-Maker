<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Bad Piano</title>
        <link rel="stylesheet" href="style.css">
        <link rel="icon" type="image/png" >
    </head>
    <body>
        <div class="main">
            <div class="wkeys key kmR2" id="0"></div>
            <div class="wkeys key kmR2" id="1"></div>
            <div class="bkeys key kbr1" id="2"></div>
            <div class="wkeys key kmR1" id="3"></div>
            <div class="bkeys key kbL1" id="4"></div>
            <div class="wkeys key" id="5"></div>
            <div class="wkeys key" id="6"></div>
            <div class="bkeys key kbL2" id="7"></div>
            <div class="wkeys key kmL1" id="8"></div>
            <div class="bkeys key kbL3" id="9"></div>
            <div class="wkeys key kmL2" id="10"></div>
            <div class="bkeys key kbL4" id="11"></div>
        </div>
        
        <audio src="sounds/bubble-shot-01.wav"></audio>
        <audio src="sounds/cabled-mess.wav"></audio>
        <audio src="sounds/348022__mattix__water-drop-01.wav"></audio>
        <audio src="sounds/moca.mp3"></audio>
        <audio src="sounds/402767__mattix__retro-coin-03.wav"></audio>
        <audio src="sounds/phone-bump-5.wav"></audio>
        <audio src="sounds/poison-shot-01.wav"></audio>
        <audio src="sounds/458641__mattix__retro-jump-02.wav"></audio>
        <audio src="sounds/retro-laser-shot-04.wav"></audio>
        <audio src="sounds/495650__mattix__stuck-reception-desk-bell.wav"></audio>
        <audio src="sounds/switch-on.wav"></audio>
        <audio src="sounds/retro-bird-01.wav"></audio>
        
        <script>
            
            function removeTransition (e) {
                if(e.propertyName !== 'transform') return;
                e.target.classList.remove('playing');
            }
            
            
            const keys = Array.from(document.querySelectorAll('.key'));             
            keys.forEach(function(keys){
                keys.addEventListener("click", function() {
                const audio = document.querySelectorAll(`audio`);
                const classKey = document.querySelector(`div[id="${this.id}"]`);
                classKey.classList.add('playing');
                audio.currentTime=0;
                audio[this.id].play();
                });
            })
            
            
            keys.forEach(key=>key.addEventListener('transitionend', removeTransition));
            
            
        </script>
    </body>
</html>